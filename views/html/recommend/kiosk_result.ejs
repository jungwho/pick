<!DOCTYPE html>
<html lang="en">
<head>
    <!-- <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"> -->
    <title>result</title>
    <link href="../../css/recommend/recommend.css" rel = "stylesheet"/>
    <link href="../../css/recommend/result.css" rel = "stylesheet"/>
    <link href="../../css/recommend/loading.css" rel = "stylesheet"/>
</head>
<body>
    <div class="loader" id = loader>
    </div>
    <div class = container style="display:none;" id = container>
    <!-- logo -->
        <div class = nav-container>
            <a class = logo href="../kiosk_home.ejs"><p>:<span>P</span></p>ICK</a>
        </div>

        <div class = title-container>
            <p><span>PICK!</span> YOUR OWN COORDINATION.</p>
        </div>

        <div class = recommend-container>
            <div class = result-container>
                <div class = capture-container>
                    <img src="../../image/detect-img.png">
                </div>
                <div class = arrow-container>
                    <img class = arrow src="../../image/arrow.png"/>
                </div>
                <div class = link-container>
                    <div class = link-box>
                        <p class = link-title><span>TOP</span> based on bottom</p>
                        <div class = link>
                            <button id = "link-button1" onclick="location.href='https://www.eqlstore.com/product/GPEB23030366151/detail'">
                                <img id="img1" src="../../image/top1.jpg">
                            </button>
                            <button id = "link-button2" onclick="location.href='https://www.eqlstore.com/product/GM0023050393608/detail'">
                                <img id="img2" src="../../image/top2.jpg">
                            </button>
                        </div>
                        <div class = button-container>
                            <button onclick="topChange1()"><img src="../../image/next.png" style="transform: rotate(180deg);"/></button>
                            <button onclick="topChange2()"><img src="../../image/next.png"/></button>
                        </div>
                    </div><br>
                    <div class = link-box>
                        <p class = link-title><span>BOTTOM</span> based on top</p>
                        <div class = link>
                            <button id = "link-button3" onclick="location.href='https://www.eqlstore.com/product/GPS723030265458/detail'">
                                <img id="img3" src="../../image/bot1.jpg">
                            </button>
                            <button id = "link-button4" onclick="location.href='https://www.eqlstore.com/product/GP1823051095830/detail'">
                                <img id="img4" src="../../image/bot2.jpg">
                        </div>
                        <div class = button-container>
                            <button onclick="botChange1()"><img src="../../image/next.png" style="transform: rotate(180deg);"/></button>
                            <button onclick="botChange2()"><img src="../../image/next.png"/></button>
                        </div>
                    </div>
                </div>
            </div>
            <div class = result-button>
                <button class = send onClick="location.href='../kiosk_home.ejs'">SEND</button>
            </div>
        </div>
        </div>
    </div>
    <div class="qrcode-container">
        <button class="button-qrcode" onclick="generateQR()">Generate QR Code</button>
        <div id="qrcode"></div>
    </div>
    <div id="qrcode"></div>
    <script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>
    <script>
        function generateQR() {
            
            const qrcode = new QRCode(document.getElementById('qrcode'), {
                text: 'https://356b-165-194-249-106.ngrok-free.app/result',
                width: 128,
                height: 128,
                colorDark : '#000',
                colorLight : '#fff',
                correctLevel : QRCode.CorrectLevel.H
            });
        }

        var showPage = function() {
        var loader = document.getElementById("loader");
        var container = document.getElementById("container");
        loader.style.display = "none";
        container.style.display = "block";
        };

        setTimeout(() => {
        showPage();
        }, 5000);

        

        // Get the captured image data URL from session storage
        const capturedImageDataURL = sessionStorage.getItem('capturedImage');

        // Set the captured image data URL as the source of the img element
        const imgElement = document.querySelector('.capture-container img');
        imgElement.src = capturedImageDataURL;

        // topChange, botChange
        const top1 = ["../../image/top1.jpg", "../../image/top2.jpg"]
        const top2 = ["../../image/top3.jpg", "../../image/top4.jpg"]
        const top3 = ["../../image/top5.jpg", "../../image/top6.jpg"]
        const topImg = [top1, top2, top3]

        const bot1 = ["../../image/bot1.jpg", "../../image/bot2.jpg"]
        const bot2 = ["../../image/bot3.jpg", "../../image/bot4.jpg"]
        const bot3 = ["../../image/bot5.jpg", "../../image/bot6.jpg"]
        const botImg = [bot1, bot2, bot3]

        var img1 = document.getElementById("img1");
        var img2 = document.getElementById("img2");

        var img3 = document.getElementById("img3");
        var img4 = document.getElementById("img4");

        var link1 = document.getElementById("link-button1");
        var link2 = document.getElementById("link-button2");
        var link3 = document.getElementById("link-button3");
        var link4 = document.getElementById("link-button4");


        var linkTop1 = ["https://www.eqlstore.com/product/GPEB23030366151/detail", 
        "https://www.eqlstore.com/product/GM0023050393608/detail"]

        var linkTop2 = ["https://www.eqlstore.com/product/GPH923050494477/detail",
        "https://www.eqlstore.com/product/GPFQ23041486855/detail"]

        var linkTop3 = ["https://www.eqlstore.com/product/GM0023041487077/detail",
        "https://www.eqlstore.com/product/GPWH23041888180/detail"]
        
        var linkBot1 = ["https://www.eqlstore.com/product/GPS723030265458/detail",
        "https://www.eqlstore.com/product/GP1823051095830/detail"]

        var linkBot2 = ["https://www.eqlstore.com/product/GM0023022160941/detail",
        "https://www.eqlstore.com/product/GP1822030326617/detail"]

        var linkBot3 = ["https://www.eqlstore.com/product/GPKF23051697717/detail",
        "https://www.eqlstore.com/product/GM0023030265305/detail"]
        
        var linkTop = [linkTop1, linkTop2, linkTop3]
        var linkBot = [linkBot1, linkBot2, linkBot3]
        var i = 0

        function topChange1() {
            i--
            if(i === -1){i = 2}
            img1.src = topImg[i][0];
            img2.src = topImg[i][1];
            link1.onclick = function(){
                location.href = linkTop[i][0];
            }
            link2.onclick = function(){
                location.href = linkTop[i][1];
            }
        }

        function topChange2() {
            i++
            if(i === 3){i = 0}
            img1.src = topImg[i][0];
            img2.src = topImg[i][1];
            link1.onclick = function(){
                location.href = linkTop[i][0];
            }
            link2.onclick = function(){
                location.href = linkTop[i][1];
            }
        }

        function botChange1() {
            i--
            if(i === -1){i = 2}
            img3.src = botImg[i][0];
            img4.src = botImg[i][1];
            link3.onclick = function(){
                location.href = linkBot[i][0];
            }
            link4.onclick = function(){
                location.href = linkBot[i][1];
            }
        }

        function botChange2() {
            i++
            if(i === 3){i = 0}
            img3.src = botImg[i][0];
            img4.src = botImg[i][1];
            link3.onclick = function(){
                location.href = linkBot[i][0];
            }
            link4.onclick = function(){
                location.href = linkBot[i][1];
            }
            
        }

        

        function linkChange1(){
            i++
        }

        </script>

        <script src="../../javascript/recommend_css/sendToDB.js"></script>
</body>

    </script>
</body>
</html>
<!-- 이현 -->

<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <title>result</title>
    <link href="../../css/recommend/recommend.css" rel = "stylesheet"/>
    <link href="../../css/recommend/result.css" rel = "stylesheet"/>
</head>
<body> -->
    <!-- logo -->
    <!-- <div class = nav-container>
        <a class = logo href="../kiosk_home.ejs"><p>:<span>P</span></p>ICK</a>
    </div>

    <div class = title-container>
        <p><span>PICK!</span> YOUR OWN COORDINATION.</p>
    </div>

    <div class = recommend-container>
        <div class = result-container>
            <div class = capture-container>
                <img src="../../image/detect-img.png">
            </div>
            <div class = arrow-container>
                <img class = arrow src="../../image/arrow.png"/>
            </div>
            <div class = link-container>
                <div class = link-box>
                    <p class = link-title>TOP based on bottom</p>
                    <div class = link>
                        <img id="img1" src="../../image/test1.jpg">
                        <img id="img2" src="../../image/test2.jpg">
                    </div>
                    <button onclick="toggleTop()">regenerate</button>
                </div><br>
                <div class = link-box>
                    <p class = link-title>BOTTOM based on top</p>
                    <div class = link>
                        <img id="img3" src="../../image/test3.jpg">
                        <img id="img4" src="../../image/test4.jpg">
                    </div>
                    <button onclick="toggleBottom()">regenerate</button>
                </div>
            </div>
        </div>
    </div>
    <body>
        <script>
          function toggleTop() {
            document.getElementById("img1").src = "../../image/test3.jpg";
            document.getElementById("img2").src = "../../image/test4.jpg";
          }
          function toggleBottom() {
            document.getElementById("img3").src = "../../image/test1.jpg";
            document.getElementById("img4").src = "../../image/test2.jpg";
          }
          
        </script>
      </body>
      <script src="../../javascript/recommend_css/sendToDB.js"></script>
</body>
</html> -->